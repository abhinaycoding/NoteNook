[{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\App.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  35 |     if (!user && PROTECTED.includes(currentPage)) {\n  36 |       // eslint-disable-next-line react-hooks/set-state-in-effect\n> 37 |       setCurrentPage('landing')\n     |       ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  38 |       return\n  39 |     }\n  40 |     if (user && profile) {","line":37,"column":7,"nodeType":null,"endLine":37,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\components\\AnalyticsCards.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\components\\CustomCursor.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\components\\DraggableDashboard.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'isPro' is defined but never used.","line":77,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":77,"endColumn":48,"suggestions":[{"messageId":"removeVar","data":{"varName":"isPro"},"fix":{"range":[2728,2735],"text":""},"desc":"Remove unused variable 'isPro'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":87,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":87,"endColumn":19}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport {\r\n  DndContext,\r\n  closestCenter,\r\n  KeyboardSensor,\r\n  PointerSensor,\r\n  useSensor,\r\n  useSensors,\r\n} from '@dnd-kit/core';\r\nimport {\r\n  arrayMove,\r\n  SortableContext,\r\n  sortableKeyboardCoordinates,\r\n  rectSortingStrategy,\r\n  useSortable\r\n} from '@dnd-kit/sortable';\r\nimport { CSS } from '@dnd-kit/utilities';\r\n\r\nimport TaskPlanner from './TaskPlanner';\r\nimport NotesPreview from './NotesPreview';\r\nimport FocusTimer from './FocusTimer';\r\nimport AnalyticsCards from './AnalyticsCards';\r\n\r\nconst WIDGETS = {\r\n  'timer': { id: 'timer', title: 'Chronos', component: FocusTimer },\r\n  'metrics': { id: 'metrics', title: 'Metrics', component: AnalyticsCards },\r\n  'ledger': { id: 'ledger', title: 'The Ledger', component: TaskPlanner },\r\n  'archives': { id: 'archives', title: 'Archives' /* Component receives props below */ }\r\n};\r\n\r\nconst DEFAULT_ORDER = ['timer', 'metrics', 'ledger', 'archives'];\r\n\r\nconst DashboardWidget = ({ id, title, children, isEditing }) => {\r\n  const {\r\n    attributes,\r\n    listeners,\r\n    setNodeRef,\r\n    transform,\r\n    transition,\r\n    isDragging\r\n  } = useSortable({ id, disabled: !isEditing });\r\n\r\n  const style = {\r\n    transform: CSS.Transform.toString(transform),\r\n    transition,\r\n    opacity: isDragging ? 0.5 : 1,\r\n    zIndex: isDragging ? 100 : 'auto',\r\n    position: isDragging ? 'relative' : 'static',\r\n  };\r\n\r\n  return (\r\n    <section ref={setNodeRef} style={style} className={`dash-section ${isEditing ? 'border-2 border-primary/50 border-dashed rounded bg-primary/5' : ''}`}>\r\n      <div className=\"flex justify-between items-center mb-4\">\r\n        <h2 className=\"text-xl font-serif text-muted italic\">{title}</h2>\r\n        {isEditing && (\r\n          <div \r\n            {...attributes} \r\n            {...listeners} \r\n            className=\"cursor-move p-2 text-muted hover:text-primary transition-colors flex items-center justify-center bg-cream/50 rounded-full border border-ink\"\r\n            style={{ touchAction: 'none' }}\r\n            title=\"Drag to reorder\"\r\n          >\r\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n              <circle cx=\"9\" cy=\"5\" r=\"1\"></circle><circle cx=\"9\" cy=\"12\" r=\"1\"></circle><circle cx=\"9\" cy=\"19\" r=\"1\"></circle>\r\n              <circle cx=\"15\" cy=\"5\" r=\"1\"></circle><circle cx=\"15\" cy=\"12\" r=\"1\"></circle><circle cx=\"15\" cy=\"19\" r=\"1\"></circle>\r\n            </svg>\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className={isEditing ? 'pointer-events-none opacity-50' : ''}>\r\n        {children}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nconst DraggableDashboard = ({ onNavigate, isPro, isEditing }) => {\r\n  const [items, setItems] = useState(() => {\r\n    const saved = localStorage.getItem('ff_widget_order');\r\n    if (saved) {\r\n      try {\r\n        const parsed = JSON.parse(saved);\r\n        // Verify all expected widgets exist in saved order (handles code updates)\r\n        if (parsed.length === DEFAULT_ORDER.length && parsed.every(p => DEFAULT_ORDER.includes(p))) {\r\n          return parsed;\r\n        }\r\n      } catch (err) { console.error('Error parsing widget order'); }\r\n    }\r\n    return DEFAULT_ORDER;\r\n  });\r\n\r\n  const sensors = useSensors(\r\n    useSensor(PointerSensor, {\r\n      activationConstraint: {\r\n        distance: 8, // Require 8px movement before dragging starts (prevents click capture)\r\n      },\r\n    }),\r\n    useSensor(KeyboardSensor, {\r\n      coordinateGetter: sortableKeyboardCoordinates,\r\n    })\r\n  );\r\n\r\n  const handleDragEnd = (event) => {\r\n    const { active, over } = event;\r\n\r\n    if (over && active.id !== over.id) {\r\n      setItems((items) => {\r\n        const oldIndex = items.indexOf(active.id);\r\n        const newIndex = items.indexOf(over.id);\r\n        const newOrder = arrayMove(items, oldIndex, newIndex);\r\n        localStorage.setItem('ff_widget_order', JSON.stringify(newOrder));\r\n        return newOrder;\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <DndContext \r\n      sensors={sensors}\r\n      collisionDetection={closestCenter}\r\n      onDragEnd={handleDragEnd}\r\n    >\r\n      <div className=\"dash-grid\">\r\n        <SortableContext \r\n          items={items}\r\n          strategy={rectSortingStrategy}\r\n        >\r\n          {items.map(id => {\r\n            const widget = WIDGETS[id];\r\n            if (!widget) return null;\r\n            \r\n            return (\r\n              <DashboardWidget \r\n                key={id} \r\n                id={id} \r\n                title={widget.title}\r\n                isEditing={isEditing}\r\n              >\r\n                {id === 'archives' ? (\r\n                  <NotesPreview onNavigate={onNavigate} />\r\n                ) : (\r\n                  <widget.component />\r\n                )}\r\n              </DashboardWidget>\r\n            );\r\n          })}\r\n        </SortableContext>\r\n      </div>\r\n    </DndContext>\r\n  );\r\n};\r\n\r\nexport default DraggableDashboard;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\components\\FocusTimer.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\components\\Navigation.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\components\\NoteEditor.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\components\\NotesPreview.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\components\\NotificationBell.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\components\\ProGate.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\components\\Sidebar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\components\\TaskPlanner.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  27 |     if (user) {\n  28 |       // eslint-disable-next-line react-hooks/set-state-in-effect\n> 29 |       setLoading(true)\n     |       ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  30 |       supabase\n  31 |         .from('tasks')\n  32 |         .select('*')","line":29,"column":7,"nodeType":null,"endLine":29,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\contexts\\AuthContext.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":135,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":135,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\contexts\\NotificationContext.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":144,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":144,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\contexts\\PlanContext.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  14 |     if (user) {\n  15 |       const stored = localStorage.getItem(`ff_plan_${user.id}`)\n> 16 |       setIsPro(stored === 'pro')\n     |       ^^^^^^^^ Avoid calling setState() directly within an effect\n  17 |     } else {\n  18 |       setIsPro(false)\n  19 |     }","line":16,"column":7,"nodeType":null,"endLine":16,"endColumn":15},{"ruleId":"no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":29,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":15},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":29,"column":17,"nodeType":"BlockStatement","messageId":"unexpected","endLine":29,"endColumn":19,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[961,961],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":38,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":15},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":38,"column":17,"nodeType":"BlockStatement","messageId":"unexpected","endLine":38,"endColumn":19,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[1221,1221],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":48,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":48,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* eslint-disable react-refresh/only-export-components */\r\nimport React, { createContext, useContext, useState, useEffect } from 'react'\r\nimport { supabase } from '../lib/supabase'\r\nimport { useAuth } from './AuthContext'\r\n\r\nconst PlanContext = createContext(null)\r\n\r\nexport function PlanProvider({ children }) {\r\n  const { user } = useAuth()\r\n  const [isPro, setIsPro] = useState(false)\r\n\r\n  // Load plan from localStorage (keyed per user)\r\n  useEffect(() => {\r\n    if (user) {\r\n      const stored = localStorage.getItem(`ff_plan_${user.id}`)\r\n      setIsPro(stored === 'pro')\r\n    } else {\r\n      setIsPro(false)\r\n    }\r\n  }, [user])\r\n\r\n  const upgradePlan = async () => {\r\n    if (!user) return\r\n    localStorage.setItem(`ff_plan_${user.id}`, 'pro')\r\n    setIsPro(true)\r\n    // Best-effort Supabase update ‚Äî won't fail if column doesn't exist yet\r\n    try {\r\n      await supabase.from('profiles').update({ is_pro: true }).eq('id', user.id)\r\n    } catch (_) {}\r\n  }\r\n\r\n  const downgradePlan = async () => {\r\n    if (!user) return\r\n    localStorage.setItem(`ff_plan_${user.id}`, 'free')\r\n    setIsPro(false)\r\n    try {\r\n      await supabase.from('profiles').update({ is_pro: false }).eq('id', user.id)\r\n    } catch (_) {}\r\n  }\r\n\r\n  return (\r\n    <PlanContext.Provider value={{ isPro, upgradePlan, downgradePlan }}>\r\n      {children}\r\n    </PlanContext.Provider>\r\n  )\r\n}\r\n\r\nexport function usePlan() {\r\n  const ctx = useContext(PlanContext)\r\n  if (!ctx) throw new Error('usePlan must be used inside PlanProvider')\r\n  return ctx\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\contexts\\ThemeContext.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":31,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":31,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\contexts\\TimerContext.jsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/set-state-in-effect').","line":42,"column":5,"severity":1,"nodeType":null,"fix":{"range":[1334,1393],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').","line":50,"column":5,"severity":1,"nodeType":null,"fix":{"range":[1681,1736],"text":" "}}],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":103,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":103,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":2,"source":"/* eslint-disable react-refresh/only-export-components */\r\nimport React, { createContext, useContext, useState, useEffect, useRef } from 'react'\r\nimport { supabase } from './supabase'\r\nimport { useAuth } from './AuthContext'\r\n\r\nconst TimerContext = createContext({})\r\n\r\nconst PRESETS = [25, 45, 60]\r\n\r\nexport const TimerProvider = ({ children }) => {\r\n  const { user } = useAuth()\r\n  const [selectedMinutes, setSelectedMinutes] = useState(25)\r\n  const [secondsLeft, setSecondsLeft] = useState(25 * 60)\r\n  const [isRunning, setIsRunning] = useState(false)\r\n  const [isComplete, setIsComplete] = useState(false)\r\n  const [sessionSaved, setSessionSaved] = useState(false)\r\n  const intervalRef = useRef(null)\r\n\r\n  // Main timer ‚Äî lives at app level, never unmounts\r\n  useEffect(() => {\r\n    clearInterval(intervalRef.current)\r\n    if (!isRunning) return\r\n\r\n    intervalRef.current = setInterval(() => {\r\n      setSecondsLeft(prev => {\r\n        if (prev <= 1) {\r\n          clearInterval(intervalRef.current)\r\n          setIsRunning(false)\r\n          setIsComplete(true)\r\n          return 0\r\n        }\r\n        return prev - 1\r\n      })\r\n    }, 1000)\r\n\r\n    return () => clearInterval(intervalRef.current)\r\n  }, [isRunning])\r\n\r\n  // Save session when complete\r\n  useEffect(() => {\r\n    if (!isComplete || !user || sessionSaved) return\r\n    // eslint-disable-next-line react-hooks/set-state-in-effect\r\n    setSessionSaved(true)\r\n    supabase.from('sessions').insert([{\r\n      user_id: user.id,\r\n      duration_seconds: selectedMinutes * 60,\r\n      completed: true,\r\n      created_at: new Date().toISOString(),\r\n    }]).catch(err => console.error('Session save error:', err.message))\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isComplete, user, selectedMinutes, sessionSaved])\r\n\r\n  const start = () => {\r\n    if (isComplete) {\r\n      setSecondsLeft(selectedMinutes * 60)\r\n      setIsComplete(false)\r\n      setSessionSaved(false)\r\n    }\r\n    setIsRunning(true)\r\n  }\r\n\r\n  const pause = () => {\r\n    clearInterval(intervalRef.current)\r\n    setIsRunning(false)\r\n  }\r\n\r\n  const reset = () => {\r\n    clearInterval(intervalRef.current)\r\n    setIsRunning(false)\r\n    setIsComplete(false)\r\n    setSessionSaved(false)\r\n    setSecondsLeft(selectedMinutes * 60)\r\n  }\r\n\r\n  const changePreset = (minutes) => {\r\n    if (isRunning) return\r\n    clearInterval(intervalRef.current)\r\n    setSelectedMinutes(minutes)\r\n    setSecondsLeft(minutes * 60)\r\n    setIsRunning(false)\r\n    setIsComplete(false)\r\n    setSessionSaved(false)\r\n  }\r\n\r\n  return (\r\n    <TimerContext.Provider value={{\r\n      selectedMinutes,\r\n      secondsLeft,\r\n      isRunning,\r\n      isComplete,\r\n      sessionSaved,\r\n      start,\r\n      pause,\r\n      reset,\r\n      changePreset,\r\n      PRESETS,\r\n    }}>\r\n      {children}\r\n    </TimerContext.Provider>\r\n  )\r\n}\r\n\r\nexport const useTimer = () => useContext(TimerContext)\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\contexts\\ToastContext.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":31,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":31,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\lib\\supabase.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\main.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\pages\\AnalyticsPage.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchAnalytics'. Either include it or remove the dependency array.","line":20,"column":6,"nodeType":"ArrayExpression","endLine":20,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [fetchAnalytics, user]","fix":{"range":[739,745],"text":"[fetchAnalytics, user]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react'\r\nimport { supabase } from '../lib/supabase'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport {\r\n  BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip,\r\n  ResponsiveContainer, PieChart, Pie, Cell, Legend\r\n} from 'recharts'\r\nimport './AnalyticsPage.css'\r\n\r\nconst AnalyticsPage = ({ onNavigate }) => {\r\n  const { user } = useAuth()\r\n  const [weeklyData, setWeeklyData] = useState([])\r\n  const [taskStats, setTaskStats] = useState({ completed: 0, pending: 0, total: 0 })\r\n  const [totalHours, setTotalHours] = useState(0)\r\n  const [streakDays, setStreakDays] = useState(0)\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    if (user) fetchAnalytics()\r\n  }, [user])\r\n\r\n  const fetchAnalytics = async () => {\r\n    try {\r\n      // Build last 7 days labels\r\n      const days = []\r\n      for (let i = 6; i >= 0; i--) {\r\n        const d = new Date()\r\n        d.setDate(d.getDate() - i)\r\n        days.push({\r\n          label: d.toLocaleDateString('en-IN', { weekday: 'short' }),\r\n          date: d.toISOString().split('T')[0],\r\n          hours: 0\r\n        })\r\n      }\r\n\r\n      // Fetch sessions for past 7 days\r\n      const sevenAgo = new Date()\r\n      sevenAgo.setDate(sevenAgo.getDate() - 6)\r\n      sevenAgo.setHours(0, 0, 0, 0)\r\n\r\n      const { data: sessions } = await supabase\r\n        .from('sessions')\r\n        .select('duration_seconds, created_at')\r\n        .eq('user_id', user.id)\r\n        .gte('created_at', sevenAgo.toISOString())\r\n\r\n      // Map sessions to days\r\n      ;(sessions || []).forEach(s => {\r\n        const sessionDate = s.created_at.split('T')[0]\r\n        const day = days.find(d => d.date === sessionDate)\r\n        if (day) day.hours += parseFloat((s.duration_seconds / 3600).toFixed(2))\r\n      })\r\n\r\n      // Round hours\r\n      const formatted = days.map(d => ({ ...d, hours: parseFloat(d.hours.toFixed(1)) }))\r\n      setWeeklyData(formatted)\r\n\r\n      // Total hours all time\r\n      const { data: allSessions } = await supabase\r\n        .from('sessions').select('duration_seconds').eq('user_id', user.id)\r\n      const total = (allSessions || []).reduce((a, s) => a + s.duration_seconds, 0)\r\n      setTotalHours((total / 3600).toFixed(1))\r\n\r\n      // Task stats\r\n      const { data: tasks } = await supabase\r\n        .from('tasks').select('completed').eq('user_id', user.id)\r\n      const completed = (tasks || []).filter(t => t.completed).length\r\n      setTaskStats({ completed, pending: (tasks || []).length - completed, total: (tasks || []).length })\r\n\r\n      // Streak: count consecutive days with sessions ending today\r\n      let streak = 0\r\n      const today = new Date()\r\n      for (let i = 0; i < 30; i++) {\r\n        const check = new Date(today)\r\n        check.setDate(check.getDate() - i)\r\n        const dateStr = check.toISOString().split('T')[0]\r\n        const hasSession = (sessions || []).some(s => s.created_at.split('T')[0] === dateStr)\r\n        if (hasSession) streak++\r\n        else break\r\n      }\r\n      setStreakDays(streak)\r\n    } catch (err) {\r\n      console.error('Error fetching analytics:', err.message)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const taskChartData = [\r\n    { name: 'Done', value: taskStats.completed, color: '#2E5C50' },\r\n    { name: 'Pending', value: taskStats.pending, color: '#E5E0D5' },\r\n  ]\r\n\r\n  return (\r\n    <div className=\"canvas-layout\">\r\n      <header className=\"canvas-header container\">\r\n        <div className=\"flex justify-between items-end border-b border-ink pb-4 pt-4\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <div className=\"logo-mark font-serif cursor-pointer text-4xl text-primary\" onClick={() => onNavigate('dashboard')}>FF.</div>\r\n            <h1 className=\"text-xl font-serif text-muted italic ml-4 pl-4\" style={{ borderLeft: '1px solid var(--border)' }}>Analytics</h1>\r\n          </div>\r\n          <button onClick={() => onNavigate('dashboard')} className=\"uppercase tracking-widest text-xs font-bold text-muted hover:text-primary transition-colors cursor-pointer\">\r\n            ‚Üê Dashboard\r\n          </button>\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"analytics-main container\">\r\n        {/* KPI Row */}\r\n        <div className=\"kpi-row\">\r\n          <div className=\"kpi-card\">\r\n            <div className=\"kpi-value\">{totalHours}</div>\r\n            <div className=\"kpi-label\">Total Hours Studied</div>\r\n          </div>\r\n          <div className=\"kpi-card\">\r\n            <div className=\"kpi-value\">{taskStats.completed}</div>\r\n            <div className=\"kpi-label\">Tasks Completed</div>\r\n          </div>\r\n          <div className=\"kpi-card\">\r\n            <div className=\"kpi-value\">{streakDays}</div>\r\n            <div className=\"kpi-label\">Day Streak üî•</div>\r\n          </div>\r\n          <div className=\"kpi-card\">\r\n            <div className=\"kpi-value\">\r\n              {taskStats.total > 0 ? Math.round((taskStats.completed / taskStats.total) * 100) : 0}%\r\n            </div>\r\n            <div className=\"kpi-label\">Completion Rate</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Charts Row */}\r\n        <div className=\"charts-row\">\r\n          {/* Weekly Study Hours Bar Chart */}\r\n          <div className=\"chart-card\">\r\n            <h3 className=\"chart-title\">Study Hours ‚Äî Last 7 Days</h3>\r\n            {loading ? <p className=\"text-xs text-muted italic\">Loading data...</p> : (\r\n              <ResponsiveContainer width=\"100%\" height={220}>\r\n                <BarChart data={weeklyData} margin={{ top: 5, right: 10, left: -20, bottom: 5 }}>\r\n                  <CartesianGrid strokeDasharray=\"3 3\" stroke=\"var(--border)\" />\r\n                  <XAxis dataKey=\"label\" tick={{ fontSize: 11, fontFamily: 'Inter', textTransform: 'uppercase' }} />\r\n                  <YAxis tick={{ fontSize: 11 }} />\r\n                  <Tooltip\r\n                    contentStyle={{ fontFamily: 'Inter', fontSize: 12, border: '1px solid var(--border)' }}\r\n                    formatter={(v) => [`${v}h`, 'Study']}\r\n                  />\r\n                  <Bar dataKey=\"hours\" fill=\"var(--text-primary)\" radius={[2, 2, 0, 0]} />\r\n                </BarChart>\r\n              </ResponsiveContainer>\r\n            )}\r\n          </div>\r\n\r\n          {/* Task Completion Pie Chart */}\r\n          <div className=\"chart-card\">\r\n            <h3 className=\"chart-title\">Task Completion</h3>\r\n            {loading ? <p className=\"text-xs text-muted italic\">Loading data...</p> : (\r\n              <ResponsiveContainer width=\"100%\" height={220}>\r\n                <PieChart>\r\n                  <Pie\r\n                    data={taskChartData}\r\n                    cx=\"50%\" cy=\"50%\"\r\n                    innerRadius={55} outerRadius={85}\r\n                    paddingAngle={3}\r\n                    dataKey=\"value\"\r\n                  >\r\n                    {taskChartData.map((entry, i) => (\r\n                      <Cell key={i} fill={entry.color} />\r\n                    ))}\r\n                  </Pie>\r\n                  <Legend iconType=\"circle\" iconSize={8} wrapperStyle={{ fontSize: 11 }} />\r\n                  <Tooltip contentStyle={{ fontFamily: 'Inter', fontSize: 12 }} />\r\n                </PieChart>\r\n              </ResponsiveContainer>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Motivational Quote */}\r\n        <div className=\"analytics-footer border-t border-ink pt-8 mt-8\">\r\n          <p className=\"font-serif italic text-2xl text-muted max-w-2xl\">\r\n            \"An investment in knowledge pays the best interest.\"\r\n          </p>\r\n          <p className=\"text-xs uppercase tracking-widest text-muted mt-2\">‚Äî Benjamin Franklin</p>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AnalyticsPage\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\pages\\AuthPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\pages\\Dashboard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\pages\\ExamPlannerPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\pages\\GoalsPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\pages\\LandingPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\pages\\LibraryPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\pages\\PricingPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\pages\\ProfileSetup.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\src\\pages\\ResumeBuilderPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\Student saas\\vite.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
